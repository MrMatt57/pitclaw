[env:wt32_sc01_plus]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
board_build.flash_mode = qio
board_build.flash_size = 16MB
board_build.partitions = default_16MB.csv
board_upload.flash_size = 16MB
board_build.arduino.memory_type = qio_opi
monitor_speed = 115200
upload_speed = 921600

; LittleFS for web UI files and config
board_build.filesystem = littlefs

lib_deps =
    https://github.com/Xinyuan-LilyGO/T-Display-S3.git  ; board support (may not be needed, check)
    adafruit/Adafruit ADS1X15@^2.5.0
    dlloydev/QuickPID@^3.1.9
    bblanchon/ArduinoJson@^7.0.0
    me-no-dev/ESPAsyncWebServer@^1.2.4
    lvgl/lvgl@^9.1.0
    bodmer/TFT_eSPI@^2.5.43
    ESP32Servo
    https://github.com/tzapu/WiFiManager.git
    ayushsharma82/ElegantOTA@^3.1.0

build_flags =
    -DELEGANTOTA_USE_ASYNC_WEBSERVER=1
    -DBOARD_HAS_PSRAM
    -DARDUINO_USB_CDC_ON_BOOT=1
    ; --------------------------------------------------------------------------
    ; TFT_eSPI config for WT32-SC01 Plus
    ;
    ; NOTE: The WT32-SC01 Plus uses a parallel 8-bit (i8080) interface to drive
    ; the ST7796 display, NOT SPI.  The pin definitions below are approximate
    ; placeholders.  The actual parallel-bus pin mapping (DB0-DB7, WR, RD, RS,
    ; CS, RST, BL) must be verified against the WT32-SC01 Plus schematic and
    ; may require a TFT_eSPI User_Setup.h configured for the parallel driver
    ; instead of these build-flag overrides.
    ; --------------------------------------------------------------------------
    -DUSER_SETUP_LOADED
    -DST7796_DRIVER
    -DTFT_WIDTH=320
    -DTFT_HEIGHT=480
    -DTFT_MISO=-1
    -DTFT_MOSI=13
    -DTFT_SCLK=14
    -DTFT_CS=15
    -DTFT_DC=21
    -DTFT_RST=22
    -DTFT_BL=23
    -DTOUCH_CS=-1
    ; LVGL config
    -DLV_CONF_INCLUDE_SIMPLE
    -DLV_TICK_PERIOD_MS=5

[env:native]
platform = native
test_framework = unity
build_flags =
    -DUNIT_TEST
    -DNATIVE_BUILD
    -Isrc
lib_deps =
    throwtheswitch/Unity@^2.6.0
test_filter = test_desktop/*
